# 4장. **분산 환경에서의 Git**

  * [4-1 분산 환경에서의 워크플로](#4-1-분산-환경에서의-워크플로)

## 4-1 분산 환경에서의 워크플로  
  중앙집중형 버전 관리 시스템과는 달리 Git은 분산형이다.  
  
  * 중앙집중식 워크플로  
    중앙집중식 시스템에서는 보통 중앙집중식 협업 모델이라는 한 가지 방식밖에 없다.  
    중앙 저장소는 딱 하나 있고 변경 사항은 모두 이 중앙 저장소에 집중된다.  
    개발자들은 이 중앙 저장소를 중심으로 작업한다.   
      <center><img src="../images/4.Distributed_Environment/Centralized_Workflow.png" width="70%" height="75%"></center>
    중앙집중식 워크플로에서는 한 개발자가 자신이 한 일을 커밋하고 서버에 Push 한다.  
    그러면 다른 개발자는 자신의 일을 커밋하고 Push 하기 전에 다른 개발자가 한 일을 먼저 Merge 해야 한다.  
    
  * Integration-Manager 워크플로  
    Git을 사용하면 리모트 저장소를 여러 개 운영할 수 있다.  
    다른 개발자는 읽기만 가능하고 자신은 쓰기도 가능한 공개 저장소를 만들수도 있다.  
    이 Workflow에는 보통 프로젝트를 대표하는 공식 저장소가 있다.  
    기여자는 우선 공식 저장소를 하나 Clone 하고 수정하고 나서 자신의 저장소에 Push 한다.  
    그 다음에 프로젝트 Integration-Manager에게 새 저장소에서 Pull 하라고 요청한다.  
    그러면 그 Integration-Manager는 기여자의 저장소를 리모트 저장소로 등록하고, 로컬에서 기여물을 테스트하고, 프로젝트 메인 브랜치에 Merge 하고, 그 내용을 다시 프로젝트 메인 저장소에 Push 한다.  
    이런 과정은 아래와 같다.
      1. 프로젝트 Integration-Manager는 프로젝트 메인 저장소에 Push를 한다.  
      2. 프로젝트 기여자는 메인 저장소를 Clone 하고 수정한다.  
      3. 기여자는 자신의 저장소에 Push 하고 Integration-Manager가 접근할 수 있도록 공개해 놓는다.  
      4. 기여자는 Integration-Manager에게 변경사항을 적용해 줄 것을 이메일로 요청한다.  
      5. Integration-Manager는 기여자의 저장소를 리모트 저장소로 등록하고 수정사항을 Merge 하여 테스트한다.  
      6. Integration-Manager는 Merge 한 사항을 메인 저장소에 Push 한다.  
          <center><img src="../images/4.Distributed_Environment/Integration_Manager.png" width="70%" height="75%"></center>

  * Dictator and Lieutenants 워크플로  
    이 방식은 저장소를 여러개 운영하는 방식을 변형한 구조이다.  
    보통 수백 명의 개발자가 참여하는 아주 큰 프로젝트를 운영할 때 이 방식을 사용한다.  
    예를 들면 Linux 커널 프로젝트가 대표적이다.  
    여러 명의 Integration-Manager가 저장소에서 자신이 맡은 부분만을 담당하는데 이들을 Lieutenants 라고 부른다.  
    모든 Lieutenant는 최종 관리자 아래에 있으며 이 최종 관리자를 Benevolent Dictator 라고 부른다.  
    Benevolent Dictator는 Lieutenant의 저장소를 가져와 공식 저장소에 Push 하고 모든 프로젝트 참여자는 이 공식 저장소에서 반드시 Pull 해야 한다.  
    이러한 워크플로는 아래와 같다.
      1. 개발자는 코드를 수정하고 master 브랜치를 기준으로 자신의 토픽 브랜치를 Rebase 한다. 여기서 master 브랜치란 공식 저장소의 브랜치를 말한다.  
      2. Lieutenant들은 개발자들의 수정사항을 자신이 관리하는 master 브랜치에 Merge 한다.
      3. Dictator는 Lieutenant의 master 브랜치를 자신의 master 브랜치로 Merge 한다.
      4. Dictator는 자신의 master 브랜치를 Push 하며 다른 모든 개발자는 Dictator의 master 브랜치를 기준으로 Rebase 한다.
          <center><img src="../images/4.Distributed_Environment/Dictator_and_Lieutenants.png" width="70%" height="75%"></center>