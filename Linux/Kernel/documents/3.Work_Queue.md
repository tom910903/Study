# 3장. Work Queue

  * [3-1 Work Queue 란?](#3-1-work-queue-란)

## 3-1 Work Queue 란?
  리눅스 커널에서 워크 큐(Work Queue)는 백그라운드에서 비동기적으로 수행해야 하는 작업을 예약하는 메커니즘이다.  
  워크 큐는 일반적으로 시간이 오래 걸리거나 커널을 차단할 수 있는 작업을 즉시 수행할 수 없을 때 사용된다.

  리눅스 커널에서 워크 큐는 인터럽트 핸들러, 디바이스 드라이버 및 다른 커널 하위 시스템 등 다양한 컨텍스트에서 사용된다.

  워크 큐의 기본 아이디어는 커널 코드가 나중에 별도의 커널 스레드에서 수행될 작업을 예약할 수 있도록 하는 것이다.  
  이 스레드는 워커 스레드(Worker Thread) 또는 워커 프로세스(Worker Process)라고도 한다.  
  수행할 작업은 워크 구조체(Work Structure)에 캡슐화되어 워크 큐에 추가된다.

  워커 스레드가 작업을 수행할 준비가 되면, 작업 구조체를 큐에서 제거하고 해당 구조체와 연결된 작업 함수를 실행한다.  
  작업이 완료되면 작업 구조체가 해제되고, 워커 스레드는 대기 상태로 돌아가 추가로 예약된 작업을 기다린다.

  워크 큐는 시스템 워크 큐와 CPU별 워크 큐 두 가지 종류가 있다.  
  시스템 워크 큐는 시스템 내 모든 CPU에서 공유되며, 장치 드라이버 등 전역적으로 수행되어야 하는 작업에 사용된다.  
  CPU별 워크 큐는 시스템 내 각 CPU에 구체적으로 할당되며, 프로세스 계정 정보 업데이트 등 로컬하게 수행 가능한 작업에 사용된다.
